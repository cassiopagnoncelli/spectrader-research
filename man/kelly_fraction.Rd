% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/kelly.R
\name{kelly_fraction}
\alias{kelly_fraction}
\title{Calculate the Classical Kelly Fraction for Optimal Position Sizing}
\usage{
kelly_fraction(rets)
}
\arguments{
\item{rets}{Numeric vector of returns. Non-finite values (NA, NaN, Inf) are
automatically removed before calculation.}
}
\value{
Numeric value between \code{0} and \code{1} representing the optimal Kelly fraction.
Returns \code{0} if there are no winning trades, and \code{1} if there are no losing trades.
The result is bounded between \code{0} and \code{1} to prevent negative or excessive leverage.
}
\description{
Computes the classical Kelly Criterion fraction (f*) for a series of returns, which
represents the optimal fraction of capital to risk on each trade to maximize
long-term growth rate. This implementation uses the traditional Kelly formula:
f* = (bp - q) / b, where b is the win/loss ratio, p is the probability of
winning, and q = 1 - p.
}
\details{
This function implements the classical Kelly Criterion, a formula used to determine
the optimal size of a series of bets to maximize logarithmic wealth. In trading,
it helps determine what fraction of capital should be risked on each trade.

The classical Kelly formula calculates:
\itemize{
\item \strong{p}: Probability of winning (proportion of positive returns)
\item \strong{q}: Probability of losing (1 - p)
\item \strong{b}: Win/loss ratio (average win / absolute average loss)
\item \strong{f*}: Kelly fraction = (bp - q) / b
}

Edge cases:
\itemize{
\item If all trades are losses, returns \code{0} (no position)
\item If all trades are wins, returns \code{1} (full position)
\item Result is clamped to \code{[0, 1]} to prevent over-leveraging
}
}
\examples{
# Example with mixed returns
returns <- c(0.05, -0.02, 0.03, -0.01, 0.04, -0.03, 0.02)
kelly_fraction(returns)

# Example with only winning trades
winning_returns <- c(0.05, 0.03, 0.04, 0.02)
kelly_fraction(winning_returns)

# Example with losing trades
losing_returns <- c(-0.02, -0.01, -0.03)
kelly_fraction(losing_returns)

}
\references{
Kelly, J. L. (1956). "A New Interpretation of Information Rate".
Bell System Technical Journal. 35 (4): 917-926.
}
